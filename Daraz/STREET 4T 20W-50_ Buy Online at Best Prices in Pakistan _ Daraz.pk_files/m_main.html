<!DOCTYPE html>
<!-- saved from url=(0118)https://daraz-by.accengage.net/pushweb/assets/m_main.html?&ACCdebugKey=efcse&ACCdebugMode=1&ACCtimestamp=1608192773711 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><link rel="manifest" href="https://daraz-by.accengage.net/pushweb/assets/manifest.json"><script async="" src="./analytics.js"></script><script async="" src="./m_w_subtrack.js"></script><script async="" src="./t_w_debug.js"></script><script>!function(e,t,n,r,i){i="AccengageWebSDKObject",e[i]=e[i]||{},e[i][r]=n,e[n]=e[n]||[],e[n].p={window:e,document:t,date:1*new Date}}(window,document,"ACC","daraz-by.accengage.net"),!function(e){"[object Object]"===Object.prototype.toString.call(e.AccengageWebSDKObject)&&"string"==typeof e.AccengageWebSDKObject["daraz-by.accengage.net"]&&function(e){function t(e){return this.handler=e.localStorage,this}function n(e,t){return this.proxy=e,this.config=t,this}function t(e){return this.handler=e.localStorage,this}function r(){try{new n(e,d).validate().start(function(e){if(-1===[u.MODE.MIDDLE.PROXY,u.MODE.MIDDLE.BRIDGE].indexOf(e.window.name))throw"middle controller mode is not provided";u.context.mode=e.window.name,u.context.location=u.LOCATION.MIDDLE,u.browserManager.init(e.window),u.context.snap(e,u.browserManager.getProperties(),u.context.location),u.context.mode===u.MODE.MIDDLE.PROXY&&(u.widgetManager.init(u.settings,u.eventManager,u.context.location,u.dom),u.utils.forwardMessage=T,u.utils.forwardFeedback=x,u.utils.downwardMessage=k,u.utils.downwardFeedback=_,u.context.window.addEventListener("message",D,!1),u.eventManager.bind(g),u.widgetManager.fire("debug",{type:"log",content:"`middle` configured"}),u.middleLS.setProps(u.context.window,u.eventManager).init(),u.middleIDB.setProps(u.context,u.widgetManager,u.utils))})}catch(t){}}function i(){f.onmessage=N,u.context.window.removeEventListener("message",D),u.context.window.addEventListener("message",C,!1)}function a(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=function(){u.utils.forwardMessage("_controllersPlugged")};return e>20?u.widgetManager.fire("debug",{type:"error",content:"notifying top retry process has reached its maximum attempt"}):(1===e?t():u.widgetManager.fire("debug",{content:"notifying top (attempts="+e+")"}),void(l=setTimeout(function(){t(),a(++e)},1e3)))}function o(){clearTimeout(l)}function s(e,t){return e.topic=u.utils.generateUUID(),u.eventManager.add(e.topic,function(n){return u.eventManager.remove(e.topic),!u.utils.empty(n.data.body)&&"onSuccess"in t?t.onSuccess.apply(this,[n.data.body]):!u.utils.empty(n.data.error)&&"onError"in t?t.onError.apply(this,[n.data.error]):void 0}),u.context.window.parent.postMessage(e,"*")}var c=this,u={};u.MODE={TOP:"acc_top",MIDDLE:{PROXY:"acc_proxy",BRIDGE:"acc_bridge",LANDING:"acc_landing_push_optinisation"}},u.ASSETS={MIDDLE:"/m_main.html",LANDING:"/index.html",CONFIG:"/config.json",WW:"/d_main.js",SW:"/"},u.WIDGET={DEBUG:"debug",SUBTRACK:"subtrack"},u.SDK_VERSION="3.3.6",u.LOCATION={TOP:"top",MIDDLE:"middle",DOWN:"down"},u.PLUGIN_COMPLIANCY={PUSH:[{name:"chrome",min:"44"},{name:"firefox",platform:"desktop",min:"46"}]},u.OWNERS={ACCENGAGE:"owners_acc"};var d={partnerId:"rocketinternetd3361c7f87f8ada",A4SKey:"bndkdev",alias:"daraz-by.accengage.net",aliasPath:"/pushweb/assets",version:"v3.3.x",allowDataCollection:"",enableOneStepOptin:"","default":{urlClick:"https://www.daraz.pk/",icon:"https://mobilecrm.accengage.net/images/logo_application/1511.png"},dependencies:{"push":{"scenario":"none","alertOptions":{"reAskingDelay":1,"theme":"blank","contents":{"misc":{"en":"<div class=\"grid3\"><center><img src=\"http://image.news.daraz.pk/lib/fe3d15707564047f7d1477/m/21/93ca9b80-3a9c-4670-b278-513386082e94.png\" style=\"width: 70%; vertical-align: middle; margin-top: 0;\" class=\"image1\" alt=\"\"></center></div><div class=\"grid9\"><p id=\"acc-alert-content\" style=\"padding-top: 0px !important;\">Daz wants to be friends with you </p><p id=\"acc-alert-subcontent\">Become friends with Daz to be the first one to know about exclusive deals and discounts.</p></div>","fr":"<div class=\"grid3\"><center><img src=\"http://image.news.daraz.pk/lib/fe3d15707564047f7d1477/m/21/93ca9b80-3a9c-4670-b278-513386082e94.png\" style=\"width: 70%; vertical-align: middle; margin-top: 0;\" class=\"image1\" alt=\"\"></center></div><div class=\"grid9\"><p id=\"acc-alert-content\" style=\"padding-top: 0px !important;\">Acceptez-vous de recevoir des alertes sur nos dernières offres?</p><p id=\"acc-alert-subcontent\">Désactivez les alertes à tout moment depuis les paramètres</p></div>"},"deny":{"en":"Not Interested","fr":"Non Merci"},"accept":{"en":"Be Friends","fr":"OK!"}},"reAskingDelay2":1}},"track":{},"vapid":{"publicKey":"BPnqL43zhLkdfbcXnJ81dfEmZd3qDE4352_xF4qi_iwI6vFZQzr-vbTS1zPgc-OWwF-5vbk54Bx5WaEppzh6ylg"}},widgets:{"debug":{"key":"efcse"},"subtrack":{"propertyId":"UA-75949512-5"}}};u.settings=d;var l,f,g={};"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});var p=function(){var e=this;return this.onSuccess=function(e,t){var n;if("object"===this.typeOf(e)&&"onSuccess"in e)return n=e.onSuccess,delete e.onSuccess,n(t)},this.onError=function(e,t){var n;if("object"===this.typeOf(e)&&"onError"in e)return n=e.onError,delete e.onError,n(t)},this.errorToString=function(e){return"object"===this.typeOf(e)&&"message"in e?e.message:"error"===this.typeOf(e)&&"message"in e?e.message:"string"==typeof e?e:"misc error"},this.payloadToString=function(e){return-1===["object","array"].indexOf(this.typeOf(e))?e:JSON.stringify(e)},this.extend=function(e,t){var n,r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},this.extendedTypeOf=function(e){var t=Object.prototype.toString.call(e);return t.slice(8,t.length-1).toLowerCase()},this.typeOf=this.extendedTypeOf,this.xhr=function(){var e=new XMLHttpRequest;return function(t,n,r){e.onreadystatechange=function(){4===e.readyState&&r(e.responseText)},e.open(t,n),e.send()}}(),this.getMessageBody=function(e){var t;try{t=JSON.parse(e.data.body)}catch(n){return e.data.body}return t},this.createPayloadMessage=function(e,t){var n={};if(e)return n.type=e,n.body=this.payloadToString(t),n},this.createPayloadFeedback=function(e,t,n){var r={};if(e){if(r.type=e,n)r.error=this.errorToString(n);else{if(!t)return;r.body=this.payloadToString(t)}return r}},this.getMessageTopic=function(e){return"string"==typeof e.data.topic?e.data.topic:void 0},this.empty=function(e){var t,n,r,i,a=[t,null,!1,0,"","0"];for(r=0,i=a.length;r<i;r++)if(e===a[r])return!0;if("object"==typeof e){for(n in e)return!1;return!0}return!1},this.emptyRecursive=function(e,t){if(this.empty(e))return!0;if(this.empty(t))return this.empty(e);"/"===t.charAt(0)&&(t=t.substr(1)),"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1));var n,r,i=t.split("/"),a=e;for(n=0;n<i.length;n++){if(r=i[n],this.empty(a[r]))return!0;a=a[r]}return!1},this.grep=function(e,t){var n,r,i=[];if("object"===this.typeOf(e))for(n in e)e[n]===t&&i.push(n);else if("array"===this.typeOf(e))for(r=0;r<e.length;r++)e[r]===t&&i.push(n);return i},this.isTypeOf=function(e,t){return t="string"==typeof t?[t]:t,-1!==t.indexOf(this.typeOf(e))},this.firstProp=function(e){for(var t in e)if(e.hasOwnProperty(t)&&"function"!=typeof t)return t;return null},this.getISOTimestampDate=function(e){return e=void 0!==e?parseInt(e,10):0,new Date(Date.now()+e).toISOString()},this.isValidDate=function(e){return"date"===this.typeOf(e)&&!isNaN(e.getTime())},this.merge=function(e,t){return void 0===e||null===e?e=[]:"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),void 0===t||null===t?t=[]:"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),e.concat(t)},this.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},this.toJSON=function(e){return"toJSON"in e?Promise.resolve(e.toJSON()):Promise.resolve(e)},this.parseJSON=function(e){try{return JSON.parse(e)}catch(t){return e}},this.isInteger=function(e){return"number"===this.typeOf(e)&&e%1==0},this.isValidString=function(e){return"string"===this.typeOf(e)&&""!==e.trim()},this.hashCode=function(e){var t,n,r,i=0;if(0===e.length)return i;for(t=0,r=e.length;t<r;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i},this.promisify=function(e){var t=this;return new Promise(function(n,r){try{n(e.apply(t))}catch(i){r(i)}})},this.each=function(t,n){var r=function(e,t){for(var n=0;n<e.length;n++)t(n,e[n])},i=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])};return"object"===e.typeOf(t)?i(t,n):r(t,n)},this.voidness=function(){},this}.bind({})();u.utils=Object.create(p),function(e){var t=function(){var e="s",n={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},r=function(e){var t=-e.getTimezoneOffset();return null!==t?t:0},i=function(){var t=r(new Date(n.BASELINE_YEAR,0,2)),i=r(new Date(n.BASELINE_YEAR,5,2)),a=t-i;return a<0?t+",1":a>0?i+",1,"+e:t+",0"},a=function(){var e,t;if("undefined"!=typeof Intl&&void 0!==Intl.DateTimeFormat&&void 0!==(e=Intl.DateTimeFormat())&&void 0!==e.resolvedOptions)return t=e.resolvedOptions().timeZone,t&&(t.indexOf("/")>-1||"UTC"===t)?t:void 0},o=function(e){for(var t=new Date(e,0,1,0,0,1,0).getTime(),n=new Date(e,12,31,23,59,59).getTime(),r=t,i=new Date(r).getTimezoneOffset(),a=null,o=null;r<n-864e5;){var c=new Date(r),u=c.getTimezoneOffset();u!==i&&(u<i&&(a=c),u>i&&(o=c),i=u),r+=864e5}return!(!a||!o)&&{s:s(a).getTime(),e:s(o).getTime()}},s=function(e,t,r){for(var i=!0;i;){var a=e,o=t,s=r;i=!1,void 0===o&&(o=n.DAY,s=n.HOUR);for(var c=new Date(a.getTime()-o).getTime(),u=a.getTime()+o,d=new Date(c).getTimezoneOffset(),l=c,f=null;l<u-s;){var g=new Date(l),p=g.getTimezoneOffset();if(p!==d){f=g;break}l+=s}if(o!==n.DAY){if(o!==n.HOUR)return f;e=f,t=n.MINUTE,r=n.SECOND,i=!0,c=u=d=l=f=g=p=void 0}else e=f,t=n.HOUR,r=n.MINUTE,i=!0,c=u=d=l=f=g=p=void 0}},c=function(e,t,n,r){if("N/A"!==n)return n;if("Asia/Beirut"===t){if("Africa/Cairo"===r.name&&13983768e5===e[6].s&&14116788e5===e[6].e)return 0;if("Asia/Jerusalem"===r.name&&13959648e5===e[6].s&&14118588e5===e[6].e)return 0}else if("America/Santiago"===t){if("America/Asuncion"===r.name&&14124816e5===e[6].s&&1397358e6===e[6].e)return 0;if("America/Campo_Grande"===r.name&&14136912e5===e[6].s&&13925196e5===e[6].e)return 0}else if("America/Montevideo"===t){if("America/Sao_Paulo"===r.name&&14136876e5===e[6].s&&1392516e6===e[6].e)return 0}else if("Pacific/Auckland"===t&&"Pacific/Fiji"===r.name&&14142456e5===e[6].s&&13961016e5===e[6].e)return 0;return n},u=function(e,r){for(var i=function(t){for(var i=0,a=0;a<e.length;a++)if(t.rules[a]&&e[a]){if(!(e[a].s>=t.rules[a].s&&e[a].e<=t.rules[a].e)){i="N/A";break}if(i=0,i+=Math.abs(e[a].s-t.rules[a].s),i+=Math.abs(t.rules[a].e-e[a].e),i>n.MAX_SCORE){i="N/A";break}}return i=c(e,r,i,t)},a={},o=t.olson.dst_rules.zones,s=o.length,u=n.AMBIGUITIES[r],d=0;d<s;d++){var l=o[d],f=i(o[d]);"N/A"!==f&&(a[l.name]=f)}for(var g in a)if(a.hasOwnProperty(g))for(var p=0;p<u.length;p++)if(u[p]===g)return g;return r},d=function(e){var n=function(){for(var e=[],n=0;n<t.olson.dst_rules.years.length;n++){var r=o(t.olson.dst_rules.years[n]);e.push(r)}return e},r=function(e){for(var t=0;t<e.length;t++)if(!1!==e[t])return!0;return!1},i=n();return r(i)?u(i,e):e};return{determine:function(){var e=a();return e||(e=t.olson.timezones[i()],void 0!==n.AMBIGUITIES[e]&&(e=d(e))),{name:function(){return e}}}}}();t.olson=t.olson||{},t.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},t.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]},e.jstz=t}(u);var m=function(e,t){var n=function(t){var n=function(e){return e.split("-")[0].toLowerCase()};try{if(!("navigator"in t))throw"no navigator in window";var r=t.navigator.languages;if("array"===e.typeOf(r)&&"string"===e.typeOf(r[0])&&!e.empty(r[0]))return n(r[0]);if(r=t.navigator.language,"string"===e.typeOf(r)&&!e.empty(r))return n(r);if(r=t.navigator.userLanguage,"string"===e.typeOf(r)&&!e.empty(r))return n(r);throw"no language retrieved"}catch(i){return""}},r=function(t){var n=function(e){var t=e.split("-");if(t.length<1)throw"no country code provided";return t[1].toUpperCase()};try{if(!("navigator"in t))throw"no navigator in window";var r=t.navigator.languages;if("array"===e.typeOf(r)&&"string"===e.typeOf(r[0])&&!e.empty(r[0]))return n(r[0]);if(r=t.navigator.language,"string"===e.typeOf(r)&&!e.empty(r))return n(r);if(r=t.navigator.userLanguage,"string"===e.typeOf(r)&&!e.empty(r))return n(r);throw"no country code retrieved"}catch(i){return""}};return this.localizeContent=function(t,n){var r=this.language,i=void 0,a=void 0;try{if("object"!==e.typeOf(n))throw"contents is not an object";if("string"===e.typeOf(n[t]))i=n[t];else{if("object"!==e.typeOf(n[t]))throw"no value provided";if(a=e.firstProp(n[t]),"string"===e.typeOf(n[t][r]))i=n[t][r];else{if(!a||"string"!==e.typeOf(n[t][a]))throw"no string value provided";i=n[t][a]}}}catch(o){i=""}return i},this.snap=function(e,i,a){a=a?a+":":"",this.threadId=a+Math.random().toString(36).substring(7),this.startDate=e.date,this.window=e.window,this.document=e.document,this.browserName=i.name,this.browserVersion=i.version,this.devicePlatform=i.platform,this.isHTTPS="https:"===this.window.location.protocol,this.currentDomain=this.window.location.hostname,this.language=n(this.window),this.countryCode=r(this.window);var o=t.determine();this.timeZone=o.name()||""},this}.bind({})(u.utils,u.jstz);u.context=Object.create(m);var h=function(){var e=function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];e=e.toString().split("."),t=t.toString().split(".");for(var n=0;n<t.length;n++)if((e[n]?parseInt(e[n]):0)<(t[n]?parseInt(t[n]):0))return!1;return!0},t=function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];e=e.toString().split("."),t=t.toString().split(".");for(var n=!1,r=0;r<t.length;r++){var i=e[r]?parseInt(e[r]):0,a=t[r]?parseInt(t[r]):0;if(i>a)return!1;n=i===a}return!n};return{getProperties:function(){return{name:this.name,version:this.version,platform:this.platform,userAgent:this.userAgent}},init:function(e){var t=this,n=e.navigator.userAgent,r=/Trident\//.test(n),i=/Safari/.test(n),a=/Chrome/.test(n),o=void 0;if(this.userAgent=n,o=n.match(/Edge\/(\d+)/))return this.name="edge",this.version=parseInt(o[1]),void(this.platform=/Windows Phone/.test(n)?"mobile":"desktop");if(r){var s=function(){t.name="internet explorer";var e=[];return e.push(n.match(/IE (\d+)/)),e.push(n.match(/rv\:(\d+)/)),e.push(n.match(/IEMobile(\d+)/)),function(){for(var n=0;n<e.length;n++)if(e[n])return void(t.version=parseInt(e[n][1]))}(),t.platform=/IEMobile/.test(n)?"mobile":"desktop",{v:void 0}}();if("object"==typeof s)return s.v}if(o=n.match(/Firefox\/(\d+)/))return this.name="firefox",this.version=parseInt(o[1]),void(this.platform=/Tablet|Mobile/.test(n)?"mobile":"desktop");if(o=n.match(/(Opera|OPR)\/(\d+)/))return this.name=/Opera Mini/.test(n)?"opera mini":"opera",this.version=parseInt(o[2]),void(this.platform=/Mobile Safari|Opera Mobi/.test(n)?"mobile":"desktop");if(o=n.match(/(UCBrowser|UBrowser)\/(\d+)/))return this.name="uc browser",this.version=parseInt(o[2]),void(this.platform=/(mobi|nokia|android)/i.test(n)?"mobile":"desktop");if(o=n.match(/SamsungBrowser\/(\d+)/))return this.name="samsung internet",this.version=parseInt(o[1]),void(this.platform=/mobi/i.test(n)?"mobile":"desktop");if((o=n.match(/Version\/([\d.]*)/))&&i&&!a){var c=o[1].split(".");return this.name="safari",this.version=c[0]+"."+c[1],void(this.platform=/iPad|iPhone|iPod/.test(n)?"mobile":"desktop")}return o=n.match(/Chrome\/(\d+)/),!o||!a||null===e.chrome||void 0===e.chrome||/Edge/.test(n)||"Google Inc."!==e.navigator.vendor||/(OPR|Opera)/.test(n)&&!/(Build\/OPR)/.test(n)?void 0:(this.name="chrome",this.version=parseInt(o[1]),void(this.platform=/Mobile Safari|Android/.test(n)?"mobile":"desktop"))},filter:function(n){for(var r=0;r<n.length;r++){var i=n[r];if(this.name===i.name&&!("platform"in i&&this.platform!==i.platform)&&(!("min"in i)||e(this.version,i.min))&&(!("max"in i)||t(this.version,i.max)))return}throw"Browser not targeted"},isTargeted:function(e){try{this.filter(e)}catch(t){return!1}return!0}}}.bind({})();u.browserManager=Object.create(h);var v=function(e,t){var n={"top:debug":"/t_w_debug.js","middle:subtrack":"/m_w_subtrack.js","middle:notification":"/m_w_notification.js"},r={},i=[],a=[],o={};a._fireWidget=function(e){var t=o.eventManager.getMessageBody(e);s(t)&&this.fire(t.widget,t.options)}.bind(this);var s=function(t){return"object"===e.typeOf(t)&&"string"===e.typeOf(t.widget)},c=function(e){if(-1===i.indexOf(e)){var t="https://"+o.settings.alias+o.settings.aliasPath+n[e];o.dom.loadJS(t)}};return this.fire=function(e,t){(r[e]=r[e]||[]).push(t)},this.getDebugQueryParams=function(){var t="";return e.empty(o.settings.widgets.debug)||e.empty(o.settings.widgets.debug.key)||(t+="&ACCdebugKey="+o.settings.widgets.debug.key,t+="&ACCdebugMode="+(e.empty(o.settings.widgets.debug.mode)?1:o.settings.widgets.debug.mode),t+="&ACCtimestamp="+1*new Date),t},this.getQueues=function(){return r},this.init=function(n,r,i,s){o.settings=n,o.eventManager=r,o.dom=s,o.eventManager.bind(a);for(var u in o.settings.widgets)if("object"===e.typeOf(o.settings.widgets[u]))switch(u){case"debug":c("top:debug");break;case"subtrack":i===t.MIDDLE&&c("middle:subtrack");break;case"notification":i===t.MIDDLE&&c("middle:notification")}},this}.bind({})(u.utils,u.LOCATION);u.widgetManager=Object.create(v),u.eventManager=function(){var e="manager:event",t={},n=function(e){return"messageevent"===u.utils.extendedTypeOf(e)&&"object"===u.utils.extendedTypeOf(e.data)&&"string"==typeof e.data.type};return{getMessageBody:function(e){var t;try{t=JSON.parse(e.data.body)}catch(n){return e.data.body}return t},getOptinTypeBody:function(e){var t=void 0;try{t=JSON.parse(e.data)}catch(n){return e.data}return t},getMessagePayload:function(e){return"object"===u.utils.extendedTypeOf(e.data)?e.data:void 0},getMessageTopic:function(e){return"string"==typeof e.data.topic?e.data.topic:void 0},getMessageType:function(e){return"string"==typeof e.data.type?e.data.type:void 0},list:function(){return Object.keys(t)},bind:function(e){var t;for(t in e)this.add(t,e[t])},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},exist:function(e){return t.hasOwnProperty(e)},trigger:function(r){var i,a;return n(r)?(i=this.getMessageType(r),this.exist(i)?t[i].apply(this,[r]):(u.widgetManager.fire(u.WIDGET.DEBUG,{type:"warning",callee:e,contents:["Event type `"+i+"` does not exist",r]}),(a=this.getMessageTopic(r))?u.utils.downwardFeedback(a,null,"event type error"):void 0)):void u.widgetManager.fire(u.WIDGET.DEBUG,{type:"warning",callee:e,contents:["Unvalid event",r]})}}}(),u.logicManager=function(){var e={};return{add:function(t,n){e[t]=n},apply:function(t,n,r){try{if(r=r||{},!e.hasOwnProperty(t))throw new Error("Unknown method");return e[t].apply(u,[n,r])}catch(i){var a="misc error";if("string"===u.utils.extendedTypeOf(i)?a=i:"error"!==u.utils.extendedTypeOf(i)||u.utils.empty(i.message)||(a=i.message),"onError"in r)return r.onError.apply(this,[a]);throw a}},exist:function(t){return e.hasOwnProperty(t)},list:function(){return e},remove:function(t){delete e[t]}}}(),u.dependencyManager=function(){var e={},t=[],n=[],r=!1,i=["core","collect","storage"];return{dependencyLoaded:function(e){t.push(e)},dependencyStarted:function(e){n.push(e)},getDependencyOptions:function(e){return u.settings.dependencies[e]||{}},getIncludedResources:function(){return e},isDependencyLoaded:function(e){return-1!==t.indexOf(e)},isDependencyStarted:function(e){return-1!==n.indexOf(e)},isSDKLoaded:function(){return r},prepareDependency:function(e){u.utils.empty(u[e])||"function"!==u.utils.extendedTypeOf(u[e].prepare)||u[e].prepare()},resourceIncluded:function(t,n){e.hasOwnProperty(t)||(e[t]=[]),e[t].push(n)},setSDKLoaded:function(e){r=e},startDependencies:function(){for(var e=0;e<t.length;e++)!u.utils.empty(u[t[e]])&&"function"===u.utils.extendedTypeOf(u[t[e]].start)&&-1===i.indexOf([t[e]])&&n.indexOf(-1===[t[e]])&&u[t[e]].start()},startGdprDependencies:function(){for(var e=0;e<i.length;e++)u.utils.empty(u[i[e]])||"function"!==u.utils.extendedTypeOf(u[i[e]].start)||u[i[e]].start()},disableDependencies:function(){for(var e=0;e<n.length;e++)-1===i.indexOf(n[e])&&u[n[e]].disablePlugin()}}}();var y=(function(e){var t={},n={},r={},i=function(){for(var e in r)r.hasOwnProperty(e)&&e in n&&"function"==typeof n[e]&&(o(e,r[e]),delete r[e])},a=function(e,t){var r=[];return Object.keys(e).forEach(function(i){"function"==typeof e[i]&&-1!==t.indexOf(i)&&(n[i]=e[i],r.push(i))}),i(),r},o=function(e,i){var a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];return e in n&&"function"==typeof n[e]?void n[e](i):void(a?r[e]=i:t.widgetManager.fire("debug",{type:"warning",callee:"manager:custom_event",content:"Custom event name `"+e+"` not registered"}))};return{add:a,trigger:o,setProps:function(e){t.widgetManager=e}}}.bind({})(u.utils),function(e){var t=function(t){try{var n=e.document.getElementById(t);if("object"!=typeof n)throw 1;return n}catch(r){return}};return{loadJS:function(t){var n=e.document.createElement("script"),r=e.document.getElementsByTagName("script")[0];n.async=1,n.src=t,r.parentNode.insertBefore(n,r)},createIframe:function(t,n){var r=e.document.createElement("iframe");return r.src=t,r.height=r.width=1,r.name=n,r.style.border="none",r.style.display="none",r},createElement:function(t,n){var r=e.document.createElement(t);for(var i in n)r.setAttribute(i,n[i]);return r},createHTML:function(t){var n=e.document.createElement("div");return n.innerHTML=t.trim(),1===n.childNodes.length?n.firstChild:n.childNodes},removeElement:function(e){var n="string"==typeof e?t(e):e;n&&n.parentNode.removeChild(n)},show:function(e){var n="string"==typeof e?t(e):e;n&&(n.style.display="block")},hide:function(e){var n="string"==typeof e?t(e):e;n&&(n.style.display="none")},hasClass:function(e,n){var r="string"==typeof e?t(e):e;return!!r&&new RegExp(" "+n+" ").test(" "+r.className+" ")},addClass:function(e,n){var r="string"==typeof e?t(e):e;r&&!this.hasClass(r,n)&&(r.className+=" "+n)},removeClass:function(e,n){var r="string"==typeof e?t(e):e;if(r){var i=" "+r.className.replace(/[\t\r\n]/g," ")+" ";if(this.hasClass(r,n)){for(;i.indexOf(" "+n+" ")>=0;)i=i.replace(" "+n+" "," ");r.className=i.replace(/^\s+|\s+$/g,"")}}},getCSSRule:function(t,n,r,i){var a=function(e){return e+";"};return t+"{"+(n||[]).map(a).join("")+("desktop"===e.devicePlatform?(r||[]).map(a).join(""):(i||[]).map(a).join(""))+"}"},createStyleSheet:function(t){var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=e.document.createElement("style");n.length&&r.setAttribute("id",n),r.innerHTML=t,e.document.head.appendChild(r)}}}.bind({})(u.context));u.dom=Object.create(y),function(e,t){var n="ACC::";e.prototype.get=function(e){var r=this.handler.getItem(n+e);return r=t.parseJSON(r),"object"===t.typeOf(r)?r:void 0},e.prototype.set=function(e,t){return this.handler.setItem(n+e,JSON.stringify(t)),this.get(e)},e.prototype.remove=function(e){return this.handler.removeItem(n+e)}}(t,u.utils),function(e,t){function n(e){if("array"!==t.typeOf(e))throw"Proxy has not been declared as an Array"}function r(e){if("object"!==t.typeOf(e))throw"no init params found";if("number"!==t.typeOf(e.date))throw"starting date is not provided";if(-1===["global","window"].indexOf(t.typeOf(e.window)))throw"global window scope is not provided nor valid";if(-1===["htmldocument","document"].indexOf(t.typeOf(e.document)))throw"page document is not provided nor valid"}function i(e){if("object"!==t.typeOf(e))throw"config is not a valid object";if(!t.isValidString(e.partnerId))throw"no `partnerId` in config"}function a(e){if(!t.empty(e[o]))throw"previous initalisation has already been made";e[o]=1*new Date}var o="a",s="p";e.prototype.validate=function(){return n(this.proxy),r(this.proxy[s]),i(this.config),this},e.prototype.start=function(e){a(this.proxy),e(this.proxy[s])}}(n,u.utils);var w=2,A="storage:transac:idb",b="ACC",O=function(){var e={},t=void 0,n=!1,r=function(){if(!e.context.window.indexedDB)return Promise.reject("IndexedDB is not defined");var r=e.context.window,i=r.indexedDB.open(b,w);return new Promise(function(r,a){i.onsuccess=function(e){t=e.target.result,n=!0,r()},i.onerror=function(t){e.widgetManager("fire",{type:"warning",filename:A,contents:["Unable to open the database",t]
}),a(t)}})},i=function(e,n){return new Promise(function(r,i){var a=t.transaction(e,"readwrite");try{r(n.call(c,a))}catch(o){i(o)}a.onerror=function(e){i(e)}})},a=function(n,r){return e.utils.empty(n)?Promise.reject("Store is empty"):e.utils.empty(t)?Promise.reject("db is not init"):i(n,function(e){return new Promise(function(t,i){var a=e.objectStore(n),o=a.get(r);o.onsuccess=function(e){t(e.target.result)},o.onerror=function(e){i(e)}})})};return{setProps:function(t,n,r){e.context=t,e.widgetManager=n,e.utils=r},get:a,prepare:function(){return n?Promise.resolve():r()}}};u.middleIDB=O(),e.l=function(e){return e.apply(u)},function(e){function t(){return"firefox"===e.browserManager.name?Promise.resolve():e.optinType&&"serviceworkercontainer"===e.utils.extendedTypeOf(r())?Promise.resolve():"serviceworker"===e.utils.extendedTypeOf(r().controller)?Promise.resolve():Promise.reject(l.SERVICE_WORKER_NOT_ACTIVATED)}function n(){var t="https://"+e.settings.alias+e.settings.aliasPath+e.ASSETS.SW+"sw_"+e.context.browserName;return"firefox"===e.context.browserName&&(t+="desktop"===e.context.devicePlatform?"_d":"_m"),t+=".js",e.optinType&&(t="https://"+window.location.hostname+"/acc_sw.js"),e.context.window.navigator.serviceWorker.register(t,{scope:"./"}).then(o)}function r(){return g?g.window.navigator.serviceWorker:e.context.window.navigator.serviceWorker}function i(t){var n=e.eventManager.getMessagePayload(t);if(!n)return e.widgetManager.fire(e.WIDGET.DEBUG,{type:"warning",callee:f,contents:["Unvalid message from SW",t]});switch(e.widgetManager.fire(e.WIDGET.DEBUG,{callee:f,contents:["Receive message from SW",n]}),e.utils.empty(n.opts)||e.utils.empty(n.opts.toLocation)?e.LOCATION.MIDDLE:n.opts.toLocation){case e.LOCATION.TOP:e.utils.forwardMessage(n.type,n.body);break;case e.LOCATION.MIDDLE:e.eventManager.trigger({data:n});break;case e.LOCATION.DOWN:e.utils.downwardMessage(n.type,n.body)}}function a(t){var n=e.eventManager.getMessagePayload(t);if(!n)return e.widgetManager.fire(e.WIDGET.DEBUG,{type:"warning",callee:f,contents:["Unvalid message from SW",t]});switch(e.widgetManager.fire(e.WIDGET.DEBUG,{callee:f,contents:["Receive message from SW",n]}),e.utils.empty(n.opts)||e.utils.empty(n.opts.toLocation)?e.LOCATION.TOP:n.opts.toLocation){case e.LOCATION.TOP:e.eventManager.trigger(t);break;case e.LOCATION.DOWN:e.utils.downwardMessage(n.type,n.body)}}function o(){return t()["catch"](function(){e.optinType||s()})}function s(){return e.widgetManager.fire(e.WIDGET.DEBUG,{callee:f,content:"Initiating bridge..."}),new Promise(function(t,n){var r=e.dom.createIframe("https://"+e.settings.alias+e.settings.aliasPath+e.ASSETS.MIDDLE,e.MODE.MIDDLE.BRIDGE);r.onload=function(){e.widgetManager.fire(e.WIDGET.DEBUG,{callee:f,content:"...Bridge initiated"}),t()},"object"==typeof e.context.document.body.appendChild(r)?g=r.contentWindow:n("Invalid bridge iframe")})}function c(){if(!("serviceWorker"in e.context.window.navigator))throw"no service worker compliancy";if(!("Notification"in e.context.window))throw"no notification api compliancy"}function u(){return new Promise(function(t,n){e.optinType&&t(),e.utils.forwardMessage("_top:isContextSecure",null,{onSuccess:function(){return t()},onError:function(){return n(l.NON_SECURE_ORIGIN)}})})}e.swHandler={};var d={NAVIGATOR_PERMISSIONS:[{name:"chrome"},{name:"firefox",min:"45"}]},l={NON_SECURE_ORIGIN:"non secure origin: unable to reach SW",PUSH_PERMISSION_NOT_GRANTED:"push permission not granted",SERVICE_WORKER_NOT_ACTIVATED:"SW is not activated"},f="plugin:sw_handler",g=null,p={EMPTY:"no subscription has been made"},m=function(e,t){function n(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}var r={userVisibleOnly:!0},i=function(e,t){var n=void 0;try{n=t.getKey(e),n=String.fromCharCode.apply(null,new Uint8Array(n)),n=btoa(n)}catch(r){n=void 0}finally{return n}};return this["delete"]=function(n){return n.pushManager.getSubscription().then(function(n){return e.empty(n)?Promise.reject(t.EMPTY):n.unsubscribe()})},this.make=function(t,i){return r.applicationServerKey=n(i),t.pushManager.subscribe(r).then(e.toJSON).then(function(e){var t={token:e.endpoint};return"keys"in e&&(t.userPublicKey=e.keys.p256dh,t.userAuth=e.keys.auth),Promise.resolve(t)})},this.read=function(n){return n.pushManager.getSubscription().then(function(n){if(e.empty(n))return Promise.reject(t.EMPTY);var r={token:n.endpoint};return"getKey"in n&&(r.userPublicKey=i("p256dh",n),r.userAuth=i("auth",n)),Promise.resolve(r)})},this}.bind({})(e.utils,p);e.eventManager.add("_sw:plugin_push_prepare",function(n){var a=e.eventManager.getMessageTopic(n),o={};return e.swHandler.getNotificationPermission().then(function(e){o.permission=e}).then(u).then(t).then(function(){r().onmessage=i,o.serviceworker=!0}).then(function(){return"granted"!==o.permission?Promise.reject(l.PUSH_PERMISSION_NOT_GRANTED):r().ready}).then(function(t){return m.make(t,e.settings.dependencies.vapid.publicKey)}).then(function(t){o=e.utils.extend(o,t||{})})["catch"](function(t){e.utils.errorToString(t)===l.NON_SECURE_ORIGIN&&(o.serviceworker=void 0),e.utils.errorToString(t)===l.SERVICE_WORKER_NOT_ACTIVATED&&(o.serviceworker=!1)}).then(function(){if(!e.optinType)return e.utils.forwardFeedback(a,o);var t=Object.assign({},{state:o,type:a,body:JSON.stringify(o)}),n=new MessageEvent(a,{data:t});e.eventManager.trigger(n)})}),e.eventManager.add("_sw:get_push_subscription",function(n){var i=e.eventManager.getMessageTopic(n);return new Promise(function(e,t){try{c(),e()}catch(n){t(n)}}).then(e.swHandler.getNotificationPermission).then(function(e){if("granted"!==e)return Promise.reject(l.PUSH_PERMISSION_NOT_GRANTED)}).then(u).then(t).then(function(){return r().ready}).then(m.read).then(function(t){return e.utils.downwardFeedback(i,t||{})})["catch"](function(t){return e.utils.downwardFeedback(i,null,e.utils.errorToString(t))})}),e.eventManager.add("_sw:plugin_push_askPermission",function(t){var n=e.eventManager.getMessageTopic(t);return e.widgetManager.fire(e.WIDGET.DEBUG,{callee:f,content:"test"}),e.swHandler.askPermission().then(function(t){"granted"===t?e.utils.forwardFeedback(n,"permission granted"):e.utils.forwardFeedback(n,null,"permission not granted")})["catch"](function(){e.utils.forwardFeedback(n,null,"error while asking permission")})}),e.eventManager.add("_sw:broadcast",function(t){var n=e.eventManager.getMessageBody(t);e.swHandler.broadcast(n)}),e.swHandler.install=function(){return n().then(function(){return Promise.resolve()})},e.swHandler.listen=function(){return null===r().controller?Promise.reject("SW is null"):(r().onmessage=a,Promise.resolve())},e.swHandler.makeSubscription=function(){return t()["catch"](function(){return Promise.reject("SW_not_fully_ready")}).then(function(){return r().ready.then(function(t){return m.make(t,e.settings.dependencies.vapid.publicKey)})["catch"](function(e){return console.log(e)})})},e.swHandler.broadcast=function(n){try{if(c(),"object"!==e.utils.typeOf(n)||e.utils.empty(n.type))throw"unvalid message"}catch(i){return e.widgetManager.fire(e.WIDGET.DEBUG,{type:"warning",callee:f,contents:["error while broadcasting to SW",e.utils.errorToString(i),n]})}return e.widgetManager.fire(e.WIDGET.DEBUG,{callee:f,contents:["Message to broadcast to SW",n]}),t().then(function(){return r().controller.postMessage({type:"_broadcast",body:n})})["catch"](function(){e.widgetManager.fire(e.WIDGET.DEBUG,{type:"warning",callee:f,content:"Service Worker not activated to broadcast message"})})},e.swHandler.getNotificationPermission=function(){return e.browserManager.isTargeted(d.NAVIGATOR_PERMISSIONS)?e.context.window.navigator.permissions.query({name:"notifications"}).then(function(e){return"state"in e?e.state:Promise.reject()})["catch"](function(){return"none"}):Promise.resolve(e.context.window.Notification.permission)},e.swHandler.askPermission=function(t,n){return n=n||{},new Promise(function(t){e.context.window.Notification.requestPermission(function(r){return"granted"===r?(e.utils.onSuccess(n,!0),t(r)):(e.utils.onError(n,"notification permission not granted"),t(r))})})},e.swHandler.removeSw=function(){return t().then(function(){return r().ready.then(function(t){t.unregister().then(function(t){return t?Promise.resolve(t):void e.widgetManager.fire(e.WIDGET.DEBUG,{type:"warning",callee:f,content:"SW has not been removed or has been already removed"})})})})["catch"](function(t){e.widgetManager.fire(e.WIDGET.DEBUG,{type:"warning",callee:f,content:"SW is not present"})})},e.dependencyManager.resourceIncluded("push","middle:swHandler")}(u),function(e,t){var n="ACC::";e.prototype.get=function(e){var r=this.handler.getItem(n+e);return r=t.parseJSON(r),"object"===t.typeOf(r)?r:void 0},e.prototype.set=function(e,t){return this.handler.setItem(n+e,JSON.stringify(t)),this.get(e)},e.prototype.remove=function(e){return this.handler.removeItem(n+e)}}(t,u.utils);var M={},S={UDID:"string",__token:"string",__userAuth:"string",__userPublicKey:"string",isOptin:"boolean",optinData:"boolean",hardOptoutStatus:"boolean",system_optin_notifs:"string"},E={},I=function(){var e=M.get("profile");u.utils.empty(e)&&function(){var e=Object.create({});Object.keys(S).forEach(function(t){e[t]=null}),M.set("profile",e)}()};E["mid:get:storage"]=function(e){var t=u.eventManager.getMessageBody(e),n=u.eventManager.getMessageTopic(e),r=M.get("profile");if(u.utils.empty(r))return x(n,null,"profile is empty");if(u.utils.empty(t))return x(n,r,null);var i=r[t.key];return u.utils.empty(i)?x(n,r,null):x(n,i,null)},E["mid:remove:storage"]=function(e){M.remove("profile"),M.remove("uiComponent-alert")},E["mid:put:storage"]=function(e){var t=u.eventManager.getMessageBody(e),n=u.eventManager.getMessageTopic(e),r=M.get("profile");if(u.utils.empty(r)&&(I(),r=M.get("profile")),u.utils.empty(t))return x(n,null,"no data has been passed");if("object"==typeof t.value)Object.keys(t.value).forEach(function(e){var n=S[e];typeof t.value[e]===n&&(r[e]=t.value[e])});else{var i=S[t.key];t.value===i&&(r[t.key]=t.value)}return M.set("profile",r),x(n,!0,null)};var P=function(){var e={};return{init:function(){M=new t(e.ctx),e.eventManager.bind(E)},setProps:function(t,n){return e.ctx=t,e.eventManager=n,this},storeInteraction:function(e){M.set("uiComponent-alert",e)},getInteraction:function(){var e=M.get("uiComponent-alert");return u.utils.empty(e)?{}:e}}};u.middleLS=P(),g._downLoaded=function(e){i(),u.widgetManager.fire("debug",{type:"log",content:"`middle` plugged"}),a()},g._notifyIncludedResources=function(e){u.utils.empty(f)||u.eventManager.remove("_notifyIncludedResources"),u.widgetManager.fire("debug",{type:"log",content:"`middle` notify included resources"}),o(),u.utils.forwardMessage("_stopNotifying");var t={},n=function(e,t){for(var n in t)if(t.hasOwnProperty(n))for(var r=0;r<t[n].length;r++)(e[n]=e[n]||[]).push(t[n][r])};n(t,u.eventManager.getMessageBody(e)||{}),n(t,u.dependencyManager.getIncludedResources()||{}),u.utils.downwardMessage("_downInitialisation",{includedResources:t})},g._disableNotifyIncludedResources=function(){u.eventManager.remove("_notifyIncludedResources")},g._dispatchMiddleWW=function(){var e="https://"+u.settings.alias+u.settings.aliasPath+u.ASSETS.WW+"?"+u.widgetManager.getDebugQueryParams();f=new Worker(e),f.onmessage=D},g._dependencyLoaded=function(e){var t=u.eventManager.getMessageBody(e);u.dependencyManager.dependencyLoaded(t),u.dependencyManager.prepareDependency(t),u.utils.forwardMessage("_dependencyLoaded",t)},g._dependencyStarted=function(e){var t=u.eventManager.getMessageBody(e);u.dependencyManager.dependencyStarted(t),u.utils.forwardMessage("_dependencyStarted",t)},g._sdkLoaded=function(e){u.dependencyManager.setSDKLoaded(!0),u.dependencyManager.startDependencies(),u.utils.forwardMessage("_sdkLoaded")},g["_middle:loadResource"]=function(e){var t=u.eventManager.getMessageBody(e);if(t){var n=u.context.document.createElement("script"),r=u.context.document.getElementsByTagName("script")[0];n.async=1,n.src=t,r.parentNode.insertBefore(n,r)}},g["_middle:prepareStorageMiddle"]=function(e){u.storage.prepare()},g["_middle:getIDBProfile"]=function(e){var t=u.utils.getMessageTopic(e);u.middleIDB.prepare().then(function(){return u.middleIDB.get("settings","me")}).then(function(e){return x(t,e,null)})["catch"](function(e){var n=u.utils.errorToString(e);return"misc error"!==n?x(t,null,n):x(t,null,"unable to get settings")})},g["_middle:removeSw"]=function(){return u.swHandler.removeSw()},g["_middle:storeInteraction"]=function(e){var t=u.utils.getMessageTopic(e),n=u.utils.getMessageBody(e);return u.utils.empty(n)||u.middleLS.storeInteraction(n),x(t,n,null)},g["_middle:getInteraction"]=function(e){var t=u.utils.getMessageTopic(e);try{var n=u.middleLS.getInteraction();return x(t,n,null)}catch(r){return x(t,null,r)}};var D=function(e){u.eventManager.trigger(e)},T=function(e,t,n){var r=u.utils.createPayloadMessage(e,t);if(r)return n?s(r,n):u.context.window.parent.postMessage(r,"*")},x=function(e,t,n){var r=u.utils.createPayloadFeedback(e,t,n);if(r)return u.context.window.parent.postMessage(r,"*")},k=function(e,t){var n=u.utils.createPayloadMessage(e,t);if(n)return u.utils.empty(f)?u.context.window.parent.postMessage(n,"*"):f.postMessage(n)},_=function(e,t,n){var r=u.utils.createPayloadFeedback(e,t,n);if(r)return u.utils.empty(f)?(r.topic=e,r.storageOneStep=!0,u.context.window.parent.postMessage(r,"*")):f.postMessage(r)},N=function(e){var t=u.eventManager.getMessageType(e);return u.eventManager.exist(t)?u.eventManager.trigger(e):u.context.window.parent.postMessage(e.data,"*")},C=function(e){var t=u.eventManager.getMessageType(e);return u.eventManager.exist(t)?u.eventManager.trigger(e):f.postMessage(e.data)};r()}(e[e.AccengageWebSDKObject["daraz-by.accengage.net"]])}(window)</script></head><body></body></html>